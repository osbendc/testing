{"remainingRequest":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue","mtime":1617802825924},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js","mtime":1617803144756},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js","mtime":1617803146183}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.map\";\nimport \"core-js/modules/es.array.reduce\";\nimport _taggedTemplateLiteral from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"mutation checkoutCreate($input: CheckoutCreateInput!) {\\n            checkoutCreate(input: $input) {\\n              checkout {\\n                id\\n                webUrl\\n              }\\n              checkoutUserErrors {\\n                code\\n                field\\n                message\\n              }\\n            }\\n          }\\n          \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport currency from 'currency.js';\nimport gql from 'graphql-tag';\nexport default {\n  metaInfo: {\n    title: 'Your Cart'\n  },\n  data: function data() {\n    return {\n      email: '',\n      isLoading: false\n    };\n  },\n  computed: {\n    cart: function cart() {\n      return this.$store.state.cart;\n    },\n    cartTotal: function cartTotal() {\n      var total = this.cart.reduce(function (total, item) {\n        return total.add(currency(item.price.amount).multiply(item.qty));\n      }, currency(0, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }));\n      return total.format();\n    }\n  },\n  methods: {\n    totalPrice: function totalPrice(_ref) {\n      var qty = _ref.qty,\n          price = _ref.price;\n      return currency(price.amount, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }).multiply(qty).format();\n    },\n    removeItem: function removeItem(itemId) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.$store.commit('removeFromCart', itemId);\n\n              case 2:\n                _this.$notify({\n                  title: 'Item removed from cart',\n                  type: 'primary'\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    checkout: function checkout() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var email, lineItems, checkoutInput, _yield$_this2$$apollo, checkoutCreate;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                email = _this2.email;\n\n                if (_this2.cart.length) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", alert('No items in cart'));\n\n              case 3:\n                lineItems = _this2.cart.map(function (item) {\n                  return {\n                    quantity: item.qty,\n                    variantId: item.variantId\n                  };\n                });\n                checkoutInput = {\n                  email: email,\n                  lineItems: lineItems\n                };\n                _context2.prev = 5;\n                _this2.isLoading = true;\n                _context2.next = 9;\n                return _this2.$apollo.mutate({\n                  mutation: gql(_templateObject()),\n                  variables: {\n                    input: checkoutInput\n                  }\n                });\n\n              case 9:\n                _yield$_this2$$apollo = _context2.sent;\n                checkoutCreate = _yield$_this2$$apollo.data.checkoutCreate;\n\n                if (!checkoutCreate.checkoutUserErrors.length) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                throw new Error(checkoutCreate.checkoutUserErrors[0].message);\n\n              case 13:\n                window.location = checkoutCreate.checkout.webUrl;\n                _context2.next = 21;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](5);\n                _this2.isLoading = false;\n                console.error(_context2.t0);\n\n                _this2.$notify({\n                  title: _context2.t0,\n                  type: 'danger',\n                  message: 'Something went wrong - please try again.'\n                });\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[5, 16]]);\n      }))();\n    }\n  }\n};",null]}