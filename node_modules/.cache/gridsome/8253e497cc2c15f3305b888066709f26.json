{"remainingRequest":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue","mtime":1617802825924},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js","mtime":1617803144756},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js","mtime":1617803146183}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.map\";\nimport \"core-js/modules/es.array.reduce\";\nimport _taggedTemplateLiteral from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"mutation checkoutCreate($input: CheckoutCreateInput!) {\\n            checkoutCreate(input: $input) {\\n              checkout {\\n                id\\n                webUrl\\n              }\\n              checkoutUserErrors {\\n                code\\n                field\\n                message\\n              }\\n            }\\n          }\\n          \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport currency from 'currency.js';\nimport gql from 'graphql-tag';\nexport default {\n  metaInfo: {\n    title: 'Your Cart'\n  },\n  data: function data() {\n    return {\n      email: '',\n      isLoading: false\n    };\n  },\n  computed: {\n    cart: function cart() {\n      return this.$store.state.cart;\n    },\n    cartTotal: function cartTotal() {\n      var total = this.cart.reduce(function (total, item) {\n        return total.add(currency(item.price.amount).multiply(item.qty));\n      }, currency(0, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }));\n      return total.format();\n    }\n  },\n  methods: {\n    totalPrice: function totalPrice(_ref) {\n      var qty = _ref.qty,\n          price = _ref.price;\n      return currency(price.amount, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }).multiply(qty).format();\n    },\n    removeItem: function removeItem(itemId) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.$store.commit('removeFromCart', itemId);\n\n              case 2:\n                _this.$notify({\n                  title: 'Item removed from cart',\n                  type: 'primary'\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    checkout: function checkout() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var email, lineItems, checkoutInput, _yield$_this2$$apollo, checkoutCreate;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                email = _this2.email;\n\n                if (_this2.cart.length) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", alert('No items in cart'));\n\n              case 3:\n                lineItems = _this2.cart.map(function (item) {\n                  return {\n                    quantity: item.qty,\n                    variantId: item.variantId\n                  };\n                });\n                checkoutInput = {\n                  email: email,\n                  lineItems: lineItems\n                };\n                _context2.prev = 5;\n                _this2.isLoading = true;\n                _context2.next = 9;\n                return _this2.$apollo.mutate({\n                  mutation: gql(_templateObject()),\n                  variables: {\n                    input: checkoutInput\n                  }\n                });\n\n              case 9:\n                _yield$_this2$$apollo = _context2.sent;\n                checkoutCreate = _yield$_this2$$apollo.data.checkoutCreate;\n\n                if (!checkoutCreate.checkoutUserErrors.length) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                throw new Error(checkoutCreate.checkoutUserErrors[0].message);\n\n              case 13:\n                window.location = checkoutCreate.checkout.webUrl;\n                _context2.next = 21;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](5);\n                _this2.isLoading = false;\n                console.error(_context2.t0);\n\n                _this2.$notify({\n                  title: _context2.t0,\n                  type: 'danger',\n                  message: 'Something went wrong - please try again.'\n                });\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[5, 16]]);\n      }))();\n    }\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Layout>\n    <div class=\"container-inner mx-auto my-16\">\n\n      <table class=\"w-full table-auto\">\n        <thead>\n          <tr>\n            <th />\n            <th class=\"px-4 py-2\">Product</th>\n            <th class=\"px-4 py-2\">Quantity</th>\n            <th class=\"px-4 py-2\">Total</th>\n            <th />\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for=\"item in cart\"\n            :key=\"item.variantId\">\n            <td>\n              <g-image\n                :src=\"item.image.thumbnail\"\n                :alt=\"item.image.altText || item.title\" />\n            </td>\n            <td>\n              {{ item.productTitle }}\n              {{ item.variantTitle !== 'Default Title' ? `- ${item.variantTitle}` : '' }}\n            </td>\n            <td>{{ item.qty }}</td>\n            <td>{{ totalPrice(item) }}</td>\n            <td>\n              <button\n                class=\"\"\n                @click=\"removeItem(item.variantId)\"\n                @keyup=\"removeItem(item.variantId)\">\n                <small>Remove</small>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n        <tfoot v-if=\"cart.length\">\n          <tr>\n            <th />\n            <th />\n            <th />\n            <th />\n            <th class=\"has-text-right\">\n              <p>Cart Total: {{ cartTotal }}</p>\n            </th>\n          </tr>\n        </tfoot>\n      </table>\n      <br>\n\n      <form v-if=\"cart.length\" @submit.prevent=\"checkout\">\n        <div class=\"flex mx-auto\">\n          <div class=\"w-1/2\">\n            <input\n              id=\"email\"\n              v-model=\"email\"\n              class=\"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal\"\n              type=\"email\"\n              placeholder=\"Your email address\"\n              required>\n          </div>\n          <div class=\"w-1/2\">\n            <button type=\"submit\"\n              :class=\"{'is-loading': isLoading}\"\n              class=\"bg-black hover:bg-gray-700 text-white font-bold py-2 px-4 border border-blue-700 rounded\">\n              Checkout\n            </button>\n          </div>\n        </div>\n      </form>\n\n      <div\n        v-else\n        class=\"txt-xl\">\n        <p>To checkout, add some items to cart.</p>\n        <br>\n        <g-link\n          to=\"/\"\n          class=\"button is-primary is-outlined\">\n          Browse\n        </g-link>\n      </div>\n\n    </div>\n  </Layout>\n</template>\n\n<script>\nimport currency from 'currency.js'\nimport gql from 'graphql-tag'\nexport default {\n  metaInfo: {\n    title: 'Your Cart'\n  },\n  data: () => ({ email: '', isLoading: false }),\n  computed: {\n    cart () { return this.$store.state.cart },\n    cartTotal () {\n      const total = this.cart.reduce((total, item) => total.add(currency(item.price.amount).multiply(item.qty)), currency(0, { formatWithSymbol: true, symbol: '$' }))\n      return total.format()\n    }\n  },\n  methods: {\n    totalPrice ({ qty, price }) {\n      return currency(price.amount, { formatWithSymbol: true, symbol: '$' }).multiply(qty).format()\n    },\n    async removeItem (itemId) {\n      await this.$store.commit('removeFromCart', itemId)\n      this.$notify({\n        title: 'Item removed from cart',\n        type: 'primary'\n      })\n    },\n    async checkout () {\n      const email = this.email\n      if (!this.cart.length) return alert('No items in cart')\n      const lineItems = this.cart.map(item => ({ quantity: item.qty, variantId: item.variantId }))\n\n      const checkoutInput = { email, lineItems }\n\n      try {\n        this.isLoading = true\n        const { data: { checkoutCreate } } = await this.$apollo.mutate({\n          mutation: gql`mutation checkoutCreate($input: CheckoutCreateInput!) {\n            checkoutCreate(input: $input) {\n              checkout {\n                id\n                webUrl\n              }\n              checkoutUserErrors {\n                code\n                field\n                message\n              }\n            }\n          }\n          `,\n          variables: { input: checkoutInput }\n        })\n        if (checkoutCreate.checkoutUserErrors.length) throw new Error(checkoutCreate.checkoutUserErrors[ 0 ].message)\n\n        window.location = checkoutCreate.checkout.webUrl\n      } catch (error) {\n        this.isLoading = false\n        console.error(error)\n        this.$notify({\n          title: error,\n          type: 'danger',\n          message: 'Something went wrong - please try again.'\n        })\n      }\n    }\n  }\n}\n</script>"],"sourceRoot":"src/pages"}]}