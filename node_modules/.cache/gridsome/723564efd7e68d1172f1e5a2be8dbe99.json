{"remainingRequest":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue","mtime":1617802825924},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/babel-loader/lib/index.js","mtime":1617803144756},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/cache-loader/dist/cjs.js","mtime":1617803144827},{"path":"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/vue-loader/lib/index.js","mtime":1617803146183}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.map\";\nimport \"core-js/modules/es.array.reduce\";\nimport _taggedTemplateLiteral from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/osbendc/Desktop/Github/vinushut-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"mutation checkoutCreate($input: CheckoutCreateInput!) {\\n            checkoutCreate(input: $input) {\\n              checkout {\\n                id\\n                webUrl\\n              }\\n              checkoutUserErrors {\\n                code\\n                field\\n                message\\n              }\\n            }\\n          }\\n          \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport currency from 'currency.js';\nimport gql from 'graphql-tag';\nexport default {\n  metaInfo: {\n    title: 'Your Cart'\n  },\n  data: function data() {\n    return {\n      email: '',\n      isLoading: false\n    };\n  },\n  computed: {\n    cart: function cart() {\n      return this.$store.state.cart;\n    },\n    cartTotal: function cartTotal() {\n      var total = this.cart.reduce(function (total, item) {\n        return total.add(currency(item.price.amount).multiply(item.qty));\n      }, currency(0, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }));\n      return total.format();\n    }\n  },\n  methods: {\n    totalPrice: function totalPrice(_ref) {\n      var qty = _ref.qty,\n          price = _ref.price;\n      return currency(price.amount, {\n        formatWithSymbol: true,\n        symbol: '$'\n      }).multiply(qty).format();\n    },\n    removeItem: function removeItem(itemId) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.$store.commit('removeFromCart', itemId);\n\n              case 2:\n                _this.$notify({\n                  title: 'Item removed from cart',\n                  type: 'primary'\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    checkout: function checkout() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var email, lineItems, checkoutInput, _yield$_this2$$apollo, checkoutCreate;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                email = _this2.email;\n\n                if (_this2.cart.length) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", alert('No items in cart'));\n\n              case 3:\n                lineItems = _this2.cart.map(function (item) {\n                  return {\n                    quantity: item.qty,\n                    variantId: item.variantId\n                  };\n                });\n                checkoutInput = {\n                  email: email,\n                  lineItems: lineItems\n                };\n                _context2.prev = 5;\n                _this2.isLoading = true;\n                _context2.next = 9;\n                return _this2.$apollo.mutate({\n                  mutation: gql(_templateObject()),\n                  variables: {\n                    input: checkoutInput\n                  }\n                });\n\n              case 9:\n                _yield$_this2$$apollo = _context2.sent;\n                checkoutCreate = _yield$_this2$$apollo.data.checkoutCreate;\n\n                if (!checkoutCreate.checkoutUserErrors.length) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                throw new Error(checkoutCreate.checkoutUserErrors[0].message);\n\n              case 13:\n                window.location = checkoutCreate.checkout.webUrl;\n                _context2.next = 21;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](5);\n                _this2.isLoading = false;\n                console.error(_context2.t0);\n\n                _this2.$notify({\n                  title: _context2.t0,\n                  type: 'danger',\n                  message: 'Something went wrong - please try again.'\n                });\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[5, 16]]);\n      }))();\n    }\n  }\n};",{"version":3,"sources":["/Users/osbendc/Desktop/Github/vinushut-vue/src/pages/Cart.vue"],"names":["currency","gql","metaInfo","title","data","email","isLoading","computed","cart","$store","state","cartTotal","total","reduce","item","add","price","amount","multiply","qty","formatWithSymbol","symbol","format","methods","totalPrice","removeItem","itemId","commit","$notify","type","checkout","length","alert","lineItems","map","quantity","variantId","checkoutInput","$apollo","mutate","mutation","variables","input","checkoutCreate","checkoutUserErrors","Error","message","window","location","webUrl","console","error"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport currency from 'currency.js'\nimport gql from 'graphql-tag'\nexport default {\n  metaInfo: {\n    title: 'Your Cart'\n  },\n  data: () => ({ email: '', isLoading: false }),\n  computed: {\n    cart () { return this.$store.state.cart },\n    cartTotal () {\n      const total = this.cart.reduce((total, item) => total.add(currency(item.price.amount).multiply(item.qty)), currency(0, { formatWithSymbol: true, symbol: '$' }))\n      return total.format()\n    }\n  },\n  methods: {\n    totalPrice ({ qty, price }) {\n      return currency(price.amount, { formatWithSymbol: true, symbol: '$' }).multiply(qty).format()\n    },\n    async removeItem (itemId) {\n      await this.$store.commit('removeFromCart', itemId)\n      this.$notify({\n        title: 'Item removed from cart',\n        type: 'primary'\n      })\n    },\n    async checkout () {\n      const email = this.email\n      if (!this.cart.length) return alert('No items in cart')\n      const lineItems = this.cart.map(item => ({ quantity: item.qty, variantId: item.variantId }))\n\n      const checkoutInput = { email, lineItems }\n\n      try {\n        this.isLoading = true\n        const { data: { checkoutCreate } } = await this.$apollo.mutate({\n          mutation: gql`mutation checkoutCreate($input: CheckoutCreateInput!) {\n            checkoutCreate(input: $input) {\n              checkout {\n                id\n                webUrl\n              }\n              checkoutUserErrors {\n                code\n                field\n                message\n              }\n            }\n          }\n          `,\n          variables: { input: checkoutInput }\n        })\n        if (checkoutCreate.checkoutUserErrors.length) throw new Error(checkoutCreate.checkoutUserErrors[ 0 ].message)\n\n        window.location = checkoutCreate.checkout.webUrl\n      } catch (error) {\n        this.isLoading = false\n        console.error(error)\n        this.$notify({\n          title: error,\n          type: 'danger',\n          message: 'Something went wrong - please try again.'\n        })\n      }\n    }\n  }\n}\n"]}]}